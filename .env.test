# historic_server/.env.test
#
# Archivo de configuración de entorno para pruebas locales y de Integración Continua (CI).
# Este perfil está optimizado para usar el modo 'simulador', lo que permite ejecutar
# pruebas de la API sin depender del sistema de archivos real (Lustre) ni de S3.

# --- Modo de Operación ---
# 'simulator': Usa el procesador de fondo simulado. Ideal para pruebas unitarias y de API.
# 'real': Usa el procesador real que interactúa con el sistema de archivos y S3.
PROCESSOR_MODE="simulator"

# --- Rutas y Base de Datos ---
# Usa archivos locales para la base de datos y las descargas para aislar las pruebas.
DB_PATH="test_historic_queries.db"
DOWNLOAD_PATH="./test_downloads"
SOURCE_PATH="/tmp/fake_lustre" # Ruta de origen simulada (no se usa en modo simulador).

# --- Rendimiento y Paralelismo ---
# Un número bajo de workers es suficiente para pruebas.
MAX_WORKERS=2

# --- Habilitación de Características (para el simulador) ---
# Permite probar la lógica de la API que depende de estas banderas.
LUSTRE_ENABLED=true
S3_FALLBACK_ENABLED=true

# --- Configuración del Simulador ---
# Tasas de éxito altas para que las pruebas sean más predecibles.
SIM_LOCAL_SUCCESS_RATE=0.95
SIM_S3_SUCCESS_RATE=0.9

# --- Límites de Consulta (para probar validaciones) ---
# Valores razonables para detectar consultas excesivamente grandes en las pruebas.
MAX_FILES_PER_QUERY=50000
MAX_SIZE_MB_PER_QUERY=20000 # ~20 GB
MIN_FREE_SPACE_GB_BUFFER=2

# --- Timeouts y Reintentos (valores bajos para pruebas rápidas) ---
FILE_PROCESSING_TIMEOUT_SECONDS=30
S3_CONNECT_TIMEOUT=5
S3_READ_TIMEOUT=10
S3_RETRY_ATTEMPTS=2
S3_RETRY_BACKOFF_SECONDS=0.5